generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Criminal {
  id            Int    @id @default(autoincrement())  // Primary key autoincremental
  nombre        String
  apodo         String
  edad          Int
  genero        String
  tratamiento   String
  peligrosidad  String
  personal_asignado Int  // Foreign key que se relaciona con Staff.dni
  celda         Int
  foto          String?
  personal      Personal  @relation(fields: [personal_asignado], references: [dni], onDelete: Cascade) // Relaci贸n con Personal
  delitos       Delito[] // Relaci贸n con Delito
  celda_info    Celda @relation(fields: [celda], references: [numero_celda], onDelete: Cascade) // Relaci贸n con Celda
  foto String?
}

model Personal {
  dni           Int    @id  // Primary key
  nombre        String
  rol           String
  turno         String
  contacto      String
  criminales    Criminal[]  // Relaci贸n inversa con Criminal
}

model Delito {
  numero_delito Int @id @default(autoincrement())
  criminal_id   Int  //foreign key
  descripcion   String
  fecha         String
  sentencia_judicial String
  lugarDelito   String
  estadoDelito  String
  nivelPrioridad String
  criminal      Criminal @relation(fields: [criminal_id], references: [id], onDelete: Cascade)
}

model Celda {
  numero_celda  Int @id @default(autoincrement())  
  tipoCelda     String
  descripcionCelda String
  nivelSeguridad String
  camarasSeguridad Boolean
  sensoresMovimiento Boolean
  alarmas        Boolean
  piso           Int
  capacidad      Int
  criminales     Criminal[] 
}
